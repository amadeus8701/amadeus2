<!DOCTYPE html>
<html>
<head>
    <title>Text and Image Content</title>
</head>
<body>
    <h1>Text File Content</h1>
    <pre id="file-content">{{ content.content }}</pre>

    <!-- 업로드된 이미지 표시 -->
    <h2>Uploaded Image</h2>
    <img src="{{ latest_image.image.url }}" alt="Uploaded Image">

    <!-- 새로운 입력을 보여줄 로그 영역 -->
    <h2>Real-Time Log</h2>
    <ul id="log-list" style="overflow-y: scroll; max-height: 300px;">
        <!-- 이전 로그 항목들을 여기에 추가 -->
    </ul>

    <script>
        // 이전 코드를 여기에 복사

        function pollFileContent() {
            // 파일 내용을 가져오기 위해 AJAX 요청을 보냅니다.
            fetch('/poll_file/', { method: 'GET' })
                .then(response => response.text())
                .then(newContent => {
                    // 새로운 내용이 이전 내용과 다르다면 페이지를 업데이트하고 로그에 기록합니다.
                    if (newContent !== oldFileContent) {
                        const message = `Content Updated: ${oldFileContent} => ${newContent}`;
                        addLogMessage(message);

                        document.getElementById('file-content').textContent = newContent;
                        oldFileContent = newContent; // 변경된 내용을 저장합니다.
                    }
                });
        }

        // 1초마다 파일 변경을 확인하기 위해 폴링 함수를 호출합니다.
        setInterval(pollFileContent, 1000);
    </script>
</body>
</html>

